echo "ğŸ” Running frontend checks (Bun + lint-staged)..."
bunx lint-staged || exit 1

echo "ğŸ Running backend checks (Django + uv + preâ€‘commit)..."
STAGED_PY=$(git diff --cached --name-only --diff-filter=ACM | grep -E '^server/.*\.py$' || true)

if [ -n "$STAGED_PY" ]; then
  echo "â¡ Python files staged:"
  echo "$STAGED_PY"
  cd server || exit 1
  uv run pre-commit run --files $STAGED_PY || exit 1
  cd - || exit 1
else
  echo "âœ” No Python files staged; skipping backend checks."
fi
